---
# Source: argo-cd/charts/redis-ha/templates/tests/test-redis-ha-pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: argocd-redis-ha-service-test
  namespace: "kube-system"
  labels:
    app: redis-ha
    heritage: "Helm"
    release: "argocd"
    chart: redis-ha-4.33.7
  annotations:
    "helm.sh/hook": test-success
spec:
  nodeSelector: {}
  tolerations: []
  containers:
    - name: "argocd-service-test"
      image: ecr-public.aws.com/docker/library/redis:7.2.8-alpine
      command:
        - sh
        - -c
        - redis-cli -h argocd-redis-ha-haproxy -p 6379 info server
      resources: {}
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
            - ALL
        readOnlyRootFilesystem: true
        runAsNonRoot: true
        runAsUser: 1000
        seccompProfile:
          type: RuntimeDefault
  restartPolicy: Never
